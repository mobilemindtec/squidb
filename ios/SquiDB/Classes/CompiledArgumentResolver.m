//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./build/j2objc/java/CompiledArgumentResolver.java
//

#include "ArgumentResolver.h"
#include "CompileContext.h"
#include "CompiledArgumentResolver.h"
#include "CompiledStatement.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "Logger.h"
#include "SqlBuilder.h"
#include "SqlStatement.h"
#include "SqlUtils.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/regex/Matcher.h"
#include "java/util/regex/Pattern.h"

@interface SquiDBCompiledArgumentResolver () {
 @public
  NSString *compiledSql_;
  id<JavaUtilList> sqlArgs_;
  SquiDBCompileContext *compileContext_;
  jboolean needsValidation_;
  id<JavaUtilList> collectionArgs_;
  SquiDBCompiledArgumentResolver_SimpleLruCache *compiledSqlCache_;
  SquiDBCompiledArgumentResolver_SimpleLruCache *argArrayCache_;
  IOSObjectArray *compiledArgs_;
}

- (jboolean)hasCollectionArgs;

- (void)findCollectionArgs;

- (NSString *)getCacheKey;

- (NSString *)resolveSqlStringWithNSString:(NSString *)cacheKey
                               withBoolean:(jboolean)largeArgMode;

- (void)appendCollectionVariableStringForSizeWithJavaLangStringBuilder:(JavaLangStringBuilder *)builder
                                                               withInt:(jint)size;

- (IOSObjectArray *)resolveSqlArgumentsWithNSString:(NSString *)cacheKey
                                            withInt:(jint)totalArgSize
                                        withBoolean:(jboolean)largeArgMode;

- (IOSObjectArray *)applyArgumentResolverWithNSObjectArray:(IOSObjectArray *)args;

- (jint)calculateArgsSizeWithCollectionArgs;

- (jint)calculateArgsSizeWithoutCollectionArgs;

- (void)populateCompiledArgsWithBoolean:(jboolean)largeArgMode;

@end

J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, compiledSql_, NSString *)
J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, sqlArgs_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, compileContext_, SquiDBCompileContext *)
J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, collectionArgs_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, compiledSqlCache_, SquiDBCompiledArgumentResolver_SimpleLruCache *)
J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, argArrayCache_, SquiDBCompiledArgumentResolver_SimpleLruCache *)
J2OBJC_FIELD_SETTER(SquiDBCompiledArgumentResolver, compiledArgs_, IOSObjectArray *)

inline JavaUtilRegexPattern *SquiDBCompiledArgumentResolver_get_REPLACEABLE_ARRAY_PARAM_PATTERN(void);
static JavaUtilRegexPattern *SquiDBCompiledArgumentResolver_REPLACEABLE_ARRAY_PARAM_PATTERN;
J2OBJC_STATIC_FIELD_OBJ_FINAL(SquiDBCompiledArgumentResolver, REPLACEABLE_ARRAY_PARAM_PATTERN, JavaUtilRegexPattern *)

inline jint SquiDBCompiledArgumentResolver_get_CACHE_SIZE(void);
#define SquiDBCompiledArgumentResolver_CACHE_SIZE 5
J2OBJC_STATIC_FIELD_CONSTANT(SquiDBCompiledArgumentResolver, CACHE_SIZE, jint)

__attribute__((unused)) static jboolean SquiDBCompiledArgumentResolver_hasCollectionArgs(SquiDBCompiledArgumentResolver *self);

__attribute__((unused)) static void SquiDBCompiledArgumentResolver_findCollectionArgs(SquiDBCompiledArgumentResolver *self);

__attribute__((unused)) static NSString *SquiDBCompiledArgumentResolver_getCacheKey(SquiDBCompiledArgumentResolver *self);

__attribute__((unused)) static NSString *SquiDBCompiledArgumentResolver_resolveSqlStringWithNSString_withBoolean_(SquiDBCompiledArgumentResolver *self, NSString *cacheKey, jboolean largeArgMode);

__attribute__((unused)) static void SquiDBCompiledArgumentResolver_appendCollectionVariableStringForSizeWithJavaLangStringBuilder_withInt_(SquiDBCompiledArgumentResolver *self, JavaLangStringBuilder *builder, jint size);

__attribute__((unused)) static IOSObjectArray *SquiDBCompiledArgumentResolver_resolveSqlArgumentsWithNSString_withInt_withBoolean_(SquiDBCompiledArgumentResolver *self, NSString *cacheKey, jint totalArgSize, jboolean largeArgMode);

__attribute__((unused)) static IOSObjectArray *SquiDBCompiledArgumentResolver_applyArgumentResolverWithNSObjectArray_(SquiDBCompiledArgumentResolver *self, IOSObjectArray *args);

__attribute__((unused)) static jint SquiDBCompiledArgumentResolver_calculateArgsSizeWithCollectionArgs(SquiDBCompiledArgumentResolver *self);

__attribute__((unused)) static jint SquiDBCompiledArgumentResolver_calculateArgsSizeWithoutCollectionArgs(SquiDBCompiledArgumentResolver *self);

__attribute__((unused)) static void SquiDBCompiledArgumentResolver_populateCompiledArgsWithBoolean_(SquiDBCompiledArgumentResolver *self, jboolean largeArgMode);

@interface SquiDBCompiledArgumentResolver_SimpleLruCache () {
 @public
  jint maxCapacity_;
}

@end

J2OBJC_INITIALIZED_DEFN(SquiDBCompiledArgumentResolver)

@implementation SquiDBCompiledArgumentResolver

- (instancetype)initPackagePrivateWithSquiDBSqlBuilder:(SquiDBSqlBuilder *)builder {
  SquiDBCompiledArgumentResolver_initPackagePrivateWithSquiDBSqlBuilder_(self, builder);
  return self;
}

- (jboolean)hasCollectionArgs {
  return SquiDBCompiledArgumentResolver_hasCollectionArgs(self);
}

- (void)findCollectionArgs {
  SquiDBCompiledArgumentResolver_findCollectionArgs(self);
}

- (SquiDBCompiledStatement *)resolveToCompiledStatement {
  NSString *cacheKey = SquiDBCompiledArgumentResolver_hasCollectionArgs(self) ? SquiDBCompiledArgumentResolver_getCacheKey(self) : nil;
  jint totalArgSize = SquiDBCompiledArgumentResolver_calculateArgsSizeWithCollectionArgs(self);
  jboolean largeArgMode = totalArgSize > SquiDBSqlStatement_MAX_VARIABLE_NUMBER;
  return new_SquiDBCompiledStatement_initWithNSString_withNSObjectArray_withBoolean_(SquiDBCompiledArgumentResolver_resolveSqlStringWithNSString_withBoolean_(self, cacheKey, largeArgMode), SquiDBCompiledArgumentResolver_resolveSqlArgumentsWithNSString_withInt_withBoolean_(self, cacheKey, totalArgSize, largeArgMode), needsValidation_);
}

- (NSString *)getCacheKey {
  return SquiDBCompiledArgumentResolver_getCacheKey(self);
}

- (NSString *)resolveSqlStringWithNSString:(NSString *)cacheKey
                               withBoolean:(jboolean)largeArgMode {
  return SquiDBCompiledArgumentResolver_resolveSqlStringWithNSString_withBoolean_(self, cacheKey, largeArgMode);
}

- (void)appendCollectionVariableStringForSizeWithJavaLangStringBuilder:(JavaLangStringBuilder *)builder
                                                               withInt:(jint)size {
  SquiDBCompiledArgumentResolver_appendCollectionVariableStringForSizeWithJavaLangStringBuilder_withInt_(self, builder, size);
}

- (IOSObjectArray *)resolveSqlArgumentsWithNSString:(NSString *)cacheKey
                                            withInt:(jint)totalArgSize
                                        withBoolean:(jboolean)largeArgMode {
  return SquiDBCompiledArgumentResolver_resolveSqlArgumentsWithNSString_withInt_withBoolean_(self, cacheKey, totalArgSize, largeArgMode);
}

- (IOSObjectArray *)applyArgumentResolverWithNSObjectArray:(IOSObjectArray *)args {
  return SquiDBCompiledArgumentResolver_applyArgumentResolverWithNSObjectArray_(self, args);
}

- (jint)calculateArgsSizeWithCollectionArgs {
  return SquiDBCompiledArgumentResolver_calculateArgsSizeWithCollectionArgs(self);
}

- (jint)calculateArgsSizeWithoutCollectionArgs {
  return SquiDBCompiledArgumentResolver_calculateArgsSizeWithoutCollectionArgs(self);
}

- (void)populateCompiledArgsWithBoolean:(jboolean)largeArgMode {
  SquiDBCompiledArgumentResolver_populateCompiledArgsWithBoolean_(self, largeArgMode);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "Z", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "LSquiDBCompiledStatement;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x2, 1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 3, 4, -1, -1, -1, -1 },
    { NULL, "[LNSObject;", 0x2, 5, 6, -1, -1, -1, -1 },
    { NULL, "[LNSObject;", 0x2, 7, 8, -1, -1, -1, -1 },
    { NULL, "I", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 9, 10, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initPackagePrivateWithSquiDBSqlBuilder:);
  methods[1].selector = @selector(hasCollectionArgs);
  methods[2].selector = @selector(findCollectionArgs);
  methods[3].selector = @selector(resolveToCompiledStatement);
  methods[4].selector = @selector(getCacheKey);
  methods[5].selector = @selector(resolveSqlStringWithNSString:withBoolean:);
  methods[6].selector = @selector(appendCollectionVariableStringForSizeWithJavaLangStringBuilder:withInt:);
  methods[7].selector = @selector(resolveSqlArgumentsWithNSString:withInt:withBoolean:);
  methods[8].selector = @selector(applyArgumentResolverWithNSObjectArray:);
  methods[9].selector = @selector(calculateArgsSizeWithCollectionArgs);
  methods[10].selector = @selector(calculateArgsSizeWithoutCollectionArgs);
  methods[11].selector = @selector(populateCompiledArgsWithBoolean:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "REPLACEABLE_ARRAY_PARAM_PATTERN", "LJavaUtilRegexPattern;", .constantValue.asLong = 0, 0x1a, -1, 11, -1, -1 },
    { "compiledSql_", "LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "sqlArgs_", "LJavaUtilList;", .constantValue.asLong = 0, 0x12, -1, -1, 12, -1 },
    { "compileContext_", "LSquiDBCompileContext;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "needsValidation_", "Z", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "collectionArgs_", "LJavaUtilList;", .constantValue.asLong = 0, 0x2, -1, -1, 13, -1 },
    { "CACHE_SIZE", "I", .constantValue.asInt = SquiDBCompiledArgumentResolver_CACHE_SIZE, 0x1a, -1, -1, -1, -1 },
    { "compiledSqlCache_", "LSquiDBCompiledArgumentResolver_SimpleLruCache;", .constantValue.asLong = 0, 0x2, -1, -1, 14, -1 },
    { "argArrayCache_", "LSquiDBCompiledArgumentResolver_SimpleLruCache;", .constantValue.asLong = 0, 0x2, -1, -1, 15, -1 },
    { "compiledArgs_", "[LNSObject;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LSquiDBSqlBuilder;", "resolveSqlString", "LNSString;Z", "appendCollectionVariableStringForSize", "LJavaLangStringBuilder;I", "resolveSqlArguments", "LNSString;IZ", "applyArgumentResolver", "[LNSObject;", "populateCompiledArgs", "Z", &SquiDBCompiledArgumentResolver_REPLACEABLE_ARRAY_PARAM_PATTERN, "Ljava/util/List<Ljava/lang/Object;>;", "Ljava/util/List<Ljava/util/Collection<*>;>;", "Lcom/yahoo/squidb/sql/CompiledArgumentResolver$SimpleLruCache<Ljava/lang/String;Ljava/lang/String;>;", "Lcom/yahoo/squidb/sql/CompiledArgumentResolver$SimpleLruCache<Ljava/lang/String;[Ljava/lang/Object;>;", "LSquiDBCompiledArgumentResolver_SimpleLruCache;" };
  static const J2ObjcClassInfo _SquiDBCompiledArgumentResolver = { "CompiledArgumentResolver", "com.yahoo.squidb.sql", ptrTable, methods, fields, 7, 0x0, 12, 10, -1, 16, -1, -1, -1 };
  return &_SquiDBCompiledArgumentResolver;
}

+ (void)initialize {
  if (self == [SquiDBCompiledArgumentResolver class]) {
    SquiDBCompiledArgumentResolver_REPLACEABLE_ARRAY_PARAM_PATTERN = JavaUtilRegexPattern_compileWithNSString_(SquiDBSqlStatement_REPLACEABLE_ARRAY_PARAMETER_REGEX);
    J2OBJC_SET_INITIALIZED(SquiDBCompiledArgumentResolver)
  }
}

@end

void SquiDBCompiledArgumentResolver_initPackagePrivateWithSquiDBSqlBuilder_(SquiDBCompiledArgumentResolver *self, SquiDBSqlBuilder *builder) {
  NSObject_init(self);
  self->compiledArgs_ = nil;
  self->compiledSql_ = [((SquiDBSqlBuilder *) nil_chk(builder)) getSqlString];
  self->sqlArgs_ = [builder getBoundArguments];
  self->compileContext_ = builder->compileContext_;
  self->needsValidation_ = [builder needsValidation];
  if ([((NSString *) nil_chk(self->compiledSql_)) java_contains:SquiDBSqlStatement_REPLACEABLE_ARRAY_PARAMETER]) {
    self->collectionArgs_ = new_JavaUtilArrayList_init();
    SquiDBCompiledArgumentResolver_findCollectionArgs(self);
    self->compiledSqlCache_ = new_SquiDBCompiledArgumentResolver_SimpleLruCache_initWithInt_(SquiDBCompiledArgumentResolver_CACHE_SIZE);
    self->argArrayCache_ = new_SquiDBCompiledArgumentResolver_SimpleLruCache_initWithInt_(SquiDBCompiledArgumentResolver_CACHE_SIZE);
  }
}

SquiDBCompiledArgumentResolver *new_SquiDBCompiledArgumentResolver_initPackagePrivateWithSquiDBSqlBuilder_(SquiDBSqlBuilder *builder) {
  J2OBJC_NEW_IMPL(SquiDBCompiledArgumentResolver, initPackagePrivateWithSquiDBSqlBuilder_, builder)
}

SquiDBCompiledArgumentResolver *create_SquiDBCompiledArgumentResolver_initPackagePrivateWithSquiDBSqlBuilder_(SquiDBSqlBuilder *builder) {
  J2OBJC_CREATE_IMPL(SquiDBCompiledArgumentResolver, initPackagePrivateWithSquiDBSqlBuilder_, builder)
}

jboolean SquiDBCompiledArgumentResolver_hasCollectionArgs(SquiDBCompiledArgumentResolver *self) {
  return self->collectionArgs_ != nil;
}

void SquiDBCompiledArgumentResolver_findCollectionArgs(SquiDBCompiledArgumentResolver *self) {
  for (id __strong arg in nil_chk(self->sqlArgs_)) {
    if ([JavaUtilCollection_class_() isInstance:arg]) {
      [((id<JavaUtilList>) nil_chk(self->collectionArgs_)) addWithId:(id<JavaUtilCollection>) cast_check(arg, JavaUtilCollection_class_())];
    }
  }
}

NSString *SquiDBCompiledArgumentResolver_getCacheKey(SquiDBCompiledArgumentResolver *self) {
  JavaLangStringBuilder *cacheKey = new_JavaLangStringBuilder_init();
  if (SquiDBCompiledArgumentResolver_hasCollectionArgs(self)) {
    for (id<JavaUtilCollection> __strong collection in nil_chk(self->collectionArgs_)) {
      (void) [((JavaLangStringBuilder *) nil_chk([cacheKey appendWithInt:[((id<JavaUtilCollection>) nil_chk(collection)) size]])) appendWithNSString:@":"];
    }
  }
  return [cacheKey description];
}

NSString *SquiDBCompiledArgumentResolver_resolveSqlStringWithNSString_withBoolean_(SquiDBCompiledArgumentResolver *self, NSString *cacheKey, jboolean largeArgMode) {
  if (SquiDBCompiledArgumentResolver_hasCollectionArgs(self)) {
    if (!largeArgMode) {
      NSString *cachedResult = [((SquiDBCompiledArgumentResolver_SimpleLruCache *) nil_chk(self->compiledSqlCache_)) getWithId:cacheKey];
      if (cachedResult != nil) {
        return cachedResult;
      }
    }
    JavaLangStringBuilder *result = new_JavaLangStringBuilder_initWithInt_([((NSString *) nil_chk(self->compiledSql_)) java_length]);
    JavaUtilRegexMatcher *m = [((JavaUtilRegexPattern *) nil_chk(SquiDBCompiledArgumentResolver_REPLACEABLE_ARRAY_PARAM_PATTERN)) matcherWithJavaLangCharSequence:self->compiledSql_];
    jint index = 0;
    jint lastStringIndex = 0;
    while ([((JavaUtilRegexMatcher *) nil_chk(m)) find]) {
      (void) [result appendWithNSString:[self->compiledSql_ java_substring:lastStringIndex endIndex:[m start]]];
      id<JavaUtilCollection> values = [((id<JavaUtilList>) nil_chk(self->collectionArgs_)) getWithInt:index];
      if (largeArgMode) {
        SquiDBSqlUtils_addInlineCollectionToSqlStringWithJavaLangStringBuilder_withSquiDBArgumentResolver_withJavaUtilCollection_(result, [((SquiDBCompileContext *) nil_chk(self->compileContext_)) getArgumentResolver], values);
      }
      else {
        SquiDBCompiledArgumentResolver_appendCollectionVariableStringForSizeWithJavaLangStringBuilder_withInt_(self, result, [((id<JavaUtilCollection>) nil_chk(values)) size]);
      }
      lastStringIndex = [m end];
      index++;
    }
    (void) [result appendWithNSString:[self->compiledSql_ java_substring:lastStringIndex endIndex:[self->compiledSql_ java_length]]];
    NSString *resultSql = [result description];
    if (!largeArgMode) {
      (void) [((SquiDBCompiledArgumentResolver_SimpleLruCache *) nil_chk(self->compiledSqlCache_)) putWithId:cacheKey withId:resultSql];
    }
    else {
      SquiDBLogger_wWithNSString_withNSString_(SquiDBLogger_LOG_TAG, JreStrcat("$$$", @"The SQL statement \"", [((NSString *) nil_chk(resultSql)) java_substring:0 endIndex:JavaLangMath_minWithInt_withInt_(200, [resultSql java_length])], @" ...\" had too many arguments to bind, so arguments were inlined into the SQL instead. Consider revising your statement to have fewer arguments."));
    }
    return resultSql;
  }
  else {
    return self->compiledSql_;
  }
}

void SquiDBCompiledArgumentResolver_appendCollectionVariableStringForSizeWithJavaLangStringBuilder_withInt_(SquiDBCompiledArgumentResolver *self, JavaLangStringBuilder *builder, jint size) {
  for (jint i = 0; i < size; i++) {
    if (i > 0) {
      (void) [((JavaLangStringBuilder *) nil_chk(builder)) appendWithNSString:@", "];
    }
    (void) [((JavaLangStringBuilder *) nil_chk(builder)) appendWithNSString:SquiDBSqlStatement_REPLACEABLE_PARAMETER];
  }
}

IOSObjectArray *SquiDBCompiledArgumentResolver_resolveSqlArgumentsWithNSString_withInt_withBoolean_(SquiDBCompiledArgumentResolver *self, NSString *cacheKey, jint totalArgSize, jboolean largeArgMode) {
  if (SquiDBCompiledArgumentResolver_hasCollectionArgs(self)) {
    IOSObjectArray *cachedResult = [((SquiDBCompiledArgumentResolver_SimpleLruCache *) nil_chk(self->argArrayCache_)) getWithId:cacheKey];
    if (cachedResult == nil) {
      jint size = largeArgMode ? SquiDBCompiledArgumentResolver_calculateArgsSizeWithoutCollectionArgs(self) : totalArgSize;
      if (self->compiledArgs_ == nil || self->compiledArgs_->size_ != size) {
        cachedResult = [IOSObjectArray newArrayWithLength:size type:NSObject_class_()];
      }
      else {
        cachedResult = self->compiledArgs_;
      }
      (void) [((SquiDBCompiledArgumentResolver_SimpleLruCache *) nil_chk(self->argArrayCache_)) putWithId:cacheKey withId:cachedResult];
    }
    self->compiledArgs_ = cachedResult;
    SquiDBCompiledArgumentResolver_populateCompiledArgsWithBoolean_(self, largeArgMode);
  }
  else {
    if (self->compiledArgs_ == nil) {
      self->compiledArgs_ = [((id<JavaUtilList>) nil_chk(self->sqlArgs_)) toArrayWithNSObjectArray:[IOSObjectArray newArrayWithLength:[self->sqlArgs_ size] type:NSObject_class_()]];
    }
  }
  return SquiDBCompiledArgumentResolver_applyArgumentResolverWithNSObjectArray_(self, self->compiledArgs_);
}

IOSObjectArray *SquiDBCompiledArgumentResolver_applyArgumentResolverWithNSObjectArray_(SquiDBCompiledArgumentResolver *self, IOSObjectArray *args) {
  id<SquiDBArgumentResolver> resolver = [((SquiDBCompileContext *) nil_chk(self->compileContext_)) getArgumentResolver];
  IOSObjectArray *result = [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(args))->size_ type:NSObject_class_()];
  for (jint i = 0; i < args->size_; i++) {
    (void) IOSObjectArray_Set(result, i, [((id<SquiDBArgumentResolver>) nil_chk(resolver)) resolveArgumentWithId:IOSObjectArray_Get(args, i)]);
  }
  return result;
}

jint SquiDBCompiledArgumentResolver_calculateArgsSizeWithCollectionArgs(SquiDBCompiledArgumentResolver *self) {
  jint startSize = [((id<JavaUtilList>) nil_chk(self->sqlArgs_)) size];
  if (SquiDBCompiledArgumentResolver_hasCollectionArgs(self)) {
    for (id<JavaUtilCollection> __strong collection in nil_chk(self->collectionArgs_)) {
      startSize += ([((id<JavaUtilCollection>) nil_chk(collection)) size] - 1);
    }
  }
  return startSize;
}

jint SquiDBCompiledArgumentResolver_calculateArgsSizeWithoutCollectionArgs(SquiDBCompiledArgumentResolver *self) {
  return [((id<JavaUtilList>) nil_chk(self->sqlArgs_)) size] - (SquiDBCompiledArgumentResolver_hasCollectionArgs(self) ? [((id<JavaUtilList>) nil_chk(self->collectionArgs_)) size] : 0);
}

void SquiDBCompiledArgumentResolver_populateCompiledArgsWithBoolean_(SquiDBCompiledArgumentResolver *self, jboolean largeArgMode) {
  jint i = 0;
  for (id __strong arg in nil_chk(self->sqlArgs_)) {
    if ([JavaUtilCollection_class_() isInstance:arg]) {
      if (!largeArgMode) {
        id<JavaUtilCollection> values = (id<JavaUtilCollection>) cast_check(arg, JavaUtilCollection_class_());
        for (id __strong obj in nil_chk(values)) {
          (void) IOSObjectArray_Set(nil_chk(self->compiledArgs_), i++, obj);
        }
      }
    }
    else {
      (void) IOSObjectArray_Set(nil_chk(self->compiledArgs_), i++, arg);
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(SquiDBCompiledArgumentResolver)

@implementation SquiDBCompiledArgumentResolver_SimpleLruCache

- (instancetype)initWithInt:(jint)maxCapacity {
  SquiDBCompiledArgumentResolver_SimpleLruCache_initWithInt_(self, maxCapacity);
  return self;
}

- (jboolean)removeEldestEntryWithJavaUtilMap_Entry:(id<JavaUtilMap_Entry>)eldest {
  return [self size] > maxCapacity_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "Z", 0x4, 1, 2, -1, 3, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithInt:);
  methods[1].selector = @selector(removeEldestEntryWithJavaUtilMap_Entry:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "maxCapacity_", "I", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "removeEldestEntry", "LJavaUtilMap_Entry;", "(Ljava/util/Map$Entry<TK;TV;>;)Z", "LSquiDBCompiledArgumentResolver;", "<K:Ljava/lang/Object;V:Ljava/lang/Object;>Ljava/util/LinkedHashMap<TK;TV;>;" };
  static const J2ObjcClassInfo _SquiDBCompiledArgumentResolver_SimpleLruCache = { "SimpleLruCache", "com.yahoo.squidb.sql", ptrTable, methods, fields, 7, 0x8, 2, 1, 4, -1, -1, 5, -1 };
  return &_SquiDBCompiledArgumentResolver_SimpleLruCache;
}

@end

void SquiDBCompiledArgumentResolver_SimpleLruCache_initWithInt_(SquiDBCompiledArgumentResolver_SimpleLruCache *self, jint maxCapacity) {
  JavaUtilLinkedHashMap_initWithInt_withFloat_withBoolean_(self, 0, 0.75f, true);
  self->maxCapacity_ = maxCapacity;
}

SquiDBCompiledArgumentResolver_SimpleLruCache *new_SquiDBCompiledArgumentResolver_SimpleLruCache_initWithInt_(jint maxCapacity) {
  J2OBJC_NEW_IMPL(SquiDBCompiledArgumentResolver_SimpleLruCache, initWithInt_, maxCapacity)
}

SquiDBCompiledArgumentResolver_SimpleLruCache *create_SquiDBCompiledArgumentResolver_SimpleLruCache_initWithInt_(jint maxCapacity) {
  J2OBJC_CREATE_IMPL(SquiDBCompiledArgumentResolver_SimpleLruCache, initWithInt_, maxCapacity)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(SquiDBCompiledArgumentResolver_SimpleLruCache)
