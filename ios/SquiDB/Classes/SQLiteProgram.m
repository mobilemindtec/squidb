//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./build/j2objc/java/SQLiteProgram.java
//

#include "DatabaseUtils.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "SQLiteClosable.h"
#include "SQLiteDatabase.h"
#include "SQLiteProgram.h"
#include "SQLiteSession.h"
#include "SQLiteStatementInfo.h"
#include "java/lang/Deprecated.h"
#include "java/lang/Double.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Long.h"
#include "java/lang/System.h"
#include "java/lang/annotation/Annotation.h"
#include "java/util/Arrays.h"

@interface SquiDBSQLiteProgram () {
 @public
  SquiDBSQLiteDatabase *mDatabase_;
  NSString *mSql_;
  jboolean mReadOnly_;
  IOSObjectArray *mColumnNames_;
  jint mNumParameters_;
  IOSObjectArray *mBindArgs_;
}

- (void)bindWithInt:(jint)index
             withId:(id)value;

@end

J2OBJC_FIELD_SETTER(SquiDBSQLiteProgram, mDatabase_, SquiDBSQLiteDatabase *)
J2OBJC_FIELD_SETTER(SquiDBSQLiteProgram, mSql_, NSString *)
J2OBJC_FIELD_SETTER(SquiDBSQLiteProgram, mColumnNames_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(SquiDBSQLiteProgram, mBindArgs_, IOSObjectArray *)

inline IOSObjectArray *SquiDBSQLiteProgram_get_EMPTY_STRING_ARRAY(void);
static IOSObjectArray *SquiDBSQLiteProgram_EMPTY_STRING_ARRAY;
J2OBJC_STATIC_FIELD_OBJ_FINAL(SquiDBSQLiteProgram, EMPTY_STRING_ARRAY, IOSObjectArray *)

__attribute__((unused)) static void SquiDBSQLiteProgram_bindWithInt_withId_(SquiDBSQLiteProgram *self, jint index, id value);

__attribute__((unused)) static IOSObjectArray *SquiDBSQLiteProgram__Annotations$0(void);

J2OBJC_INITIALIZED_DEFN(SquiDBSQLiteProgram)

@implementation SquiDBSQLiteProgram

- (instancetype)initWithSquiDBSQLiteDatabase:(SquiDBSQLiteDatabase *)db
                                withNSString:(NSString *)sql
                           withNSObjectArray:(IOSObjectArray *)bindArgs {
  SquiDBSQLiteProgram_initWithSquiDBSQLiteDatabase_withNSString_withNSObjectArray_(self, db, sql, bindArgs);
  return self;
}

- (SquiDBSQLiteDatabase *)getDatabase {
  return mDatabase_;
}

- (NSString *)getSql {
  return mSql_;
}

- (IOSObjectArray *)getBindArgs {
  return mBindArgs_;
}

- (IOSObjectArray *)getColumnNames {
  return mColumnNames_;
}

- (SquiDBSQLiteSession *)getSession {
  return [((SquiDBSQLiteDatabase *) nil_chk(mDatabase_)) getThreadSession];
}

- (jint)getConnectionFlags {
  return [((SquiDBSQLiteDatabase *) nil_chk(mDatabase_)) getThreadDefaultConnectionFlagsWithBoolean:mReadOnly_];
}

- (void)onCorruption {
  [((SquiDBSQLiteDatabase *) nil_chk(mDatabase_)) onCorruption];
}

- (jint)getUniqueId {
  return -1;
}

- (void)bindNullWithInt:(jint)index {
  SquiDBSQLiteProgram_bindWithInt_withId_(self, index, nil);
}

- (void)bindLongWithInt:(jint)index
               withLong:(jlong)value {
  SquiDBSQLiteProgram_bindWithInt_withId_(self, index, JavaLangLong_valueOfWithLong_(value));
}

- (void)bindDoubleWithInt:(jint)index
               withDouble:(jdouble)value {
  SquiDBSQLiteProgram_bindWithInt_withId_(self, index, JavaLangDouble_valueOfWithDouble_(value));
}

- (void)bindStringWithInt:(jint)index
             withNSString:(NSString *)value {
  if (value == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$", @"the bind value at index ", index, @" is null"));
  }
  SquiDBSQLiteProgram_bindWithInt_withId_(self, index, value);
}

- (void)bindBlobWithInt:(jint)index
          withByteArray:(IOSByteArray *)value {
  if (value == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$", @"the bind value at index ", index, @" is null"));
  }
  SquiDBSQLiteProgram_bindWithInt_withId_(self, index, value);
}

- (void)clearBindings {
  if (mBindArgs_ != nil) {
    JavaUtilArrays_fillWithNSObjectArray_withId_(mBindArgs_, nil);
  }
}

- (void)bindAllArgsAsStringsWithNSStringArray:(IOSObjectArray *)bindArgs {
  if (bindArgs != nil) {
    for (jint i = bindArgs->size_; i != 0; i--) {
      [self bindStringWithInt:i withNSString:IOSObjectArray_Get(bindArgs, i - 1)];
    }
  }
}

- (void)onAllReferencesReleased {
  [self clearBindings];
}

- (void)bindWithInt:(jint)index
             withId:(id)value {
  SquiDBSQLiteProgram_bindWithInt_withId_(self, index, value);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "LSquiDBSQLiteDatabase;", 0x10, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x10, -1, -1, -1, -1, -1, -1 },
    { NULL, "[LNSObject;", 0x10, -1, -1, -1, -1, -1, -1 },
    { NULL, "[LNSString;", 0x10, -1, -1, -1, -1, -1, -1 },
    { NULL, "LSquiDBSQLiteSession;", 0x14, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x14, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x14, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, 1, -1 },
    { NULL, "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 4, 5, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 6, 7, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 8, 9, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 10, 11, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 12, 13, -1, -1, -1, -1 },
    { NULL, "V", 0x4, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 14, 15, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithSquiDBSQLiteDatabase:withNSString:withNSObjectArray:);
  methods[1].selector = @selector(getDatabase);
  methods[2].selector = @selector(getSql);
  methods[3].selector = @selector(getBindArgs);
  methods[4].selector = @selector(getColumnNames);
  methods[5].selector = @selector(getSession);
  methods[6].selector = @selector(getConnectionFlags);
  methods[7].selector = @selector(onCorruption);
  methods[8].selector = @selector(getUniqueId);
  methods[9].selector = @selector(bindNullWithInt:);
  methods[10].selector = @selector(bindLongWithInt:withLong:);
  methods[11].selector = @selector(bindDoubleWithInt:withDouble:);
  methods[12].selector = @selector(bindStringWithInt:withNSString:);
  methods[13].selector = @selector(bindBlobWithInt:withByteArray:);
  methods[14].selector = @selector(clearBindings);
  methods[15].selector = @selector(bindAllArgsAsStringsWithNSStringArray:);
  methods[16].selector = @selector(onAllReferencesReleased);
  methods[17].selector = @selector(bindWithInt:withId:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "EMPTY_STRING_ARRAY", "[LNSString;", .constantValue.asLong = 0, 0x1a, -1, 16, -1, -1 },
    { "mDatabase_", "LSquiDBSQLiteDatabase;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mSql_", "LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mReadOnly_", "Z", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mColumnNames_", "[LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mNumParameters_", "I", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mBindArgs_", "[LNSObject;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LSquiDBSQLiteDatabase;LNSString;[LNSObject;", (void *)&SquiDBSQLiteProgram__Annotations$0, "bindNull", "I", "bindLong", "IJ", "bindDouble", "ID", "bindString", "ILNSString;", "bindBlob", "I[B", "bindAllArgsAsStrings", "[LNSString;", "bind", "ILNSObject;", &SquiDBSQLiteProgram_EMPTY_STRING_ARRAY };
  static const J2ObjcClassInfo _SquiDBSQLiteProgram = { "SQLiteProgram", "com.yahoo.android.sqlite", ptrTable, methods, fields, 7, 0x401, 18, 7, -1, -1, -1, -1, -1 };
  return &_SquiDBSQLiteProgram;
}

+ (void)initialize {
  if (self == [SquiDBSQLiteProgram class]) {
    SquiDBSQLiteProgram_EMPTY_STRING_ARRAY = [IOSObjectArray newArrayWithLength:0 type:NSString_class_()];
    J2OBJC_SET_INITIALIZED(SquiDBSQLiteProgram)
  }
}

@end

void SquiDBSQLiteProgram_initWithSquiDBSQLiteDatabase_withNSString_withNSObjectArray_(SquiDBSQLiteProgram *self, SquiDBSQLiteDatabase *db, NSString *sql, IOSObjectArray *bindArgs) {
  SquiDBSQLiteClosable_init(self);
  self->mDatabase_ = db;
  self->mSql_ = [((NSString *) nil_chk(sql)) java_trim];
  jint n = SquiDBDatabaseUtils_getSqlStatementTypeWithNSString_(self->mSql_);
  {
    jboolean assumeReadOnly;
    SquiDBSQLiteStatementInfo *info;
    switch (n) {
      case SquiDBDatabaseUtils_STATEMENT_BEGIN:
      case SquiDBDatabaseUtils_STATEMENT_COMMIT:
      case SquiDBDatabaseUtils_STATEMENT_ABORT:
      self->mReadOnly_ = false;
      self->mColumnNames_ = SquiDBSQLiteProgram_EMPTY_STRING_ARRAY;
      self->mNumParameters_ = 0;
      break;
      default:
      assumeReadOnly = (n == SquiDBDatabaseUtils_STATEMENT_SELECT);
      info = new_SquiDBSQLiteStatementInfo_init();
      [((SquiDBSQLiteSession *) nil_chk([((SquiDBSQLiteDatabase *) nil_chk(db)) getThreadSession])) prepareWithNSString:self->mSql_ withInt:[db getThreadDefaultConnectionFlagsWithBoolean:assumeReadOnly] withSquiDBSQLiteStatementInfo:info];
      self->mReadOnly_ = info->readOnly_;
      self->mColumnNames_ = info->columnNames_;
      self->mNumParameters_ = info->numParameters_;
      break;
    }
  }
  if (bindArgs != nil && bindArgs->size_ > self->mNumParameters_) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$I$", @"Too many bind arguments.  ", bindArgs->size_, @" arguments were provided but the statement needs ", self->mNumParameters_, @" arguments."));
  }
  if (self->mNumParameters_ != 0) {
    self->mBindArgs_ = [IOSObjectArray newArrayWithLength:self->mNumParameters_ type:NSObject_class_()];
    if (bindArgs != nil) {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(bindArgs, 0, self->mBindArgs_, 0, bindArgs->size_);
    }
  }
  else {
    self->mBindArgs_ = nil;
  }
}

void SquiDBSQLiteProgram_bindWithInt_withId_(SquiDBSQLiteProgram *self, jint index, id value) {
  if (index < 1 || index > self->mNumParameters_) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$I$", @"Cannot bind argument at index ", index, @" because the index is out of range.  The statement has ", self->mNumParameters_, @" parameters."));
  }
  (void) IOSObjectArray_Set(nil_chk(self->mBindArgs_), index - 1, value);
}

IOSObjectArray *SquiDBSQLiteProgram__Annotations$0() {
  return [IOSObjectArray newArrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(SquiDBSQLiteProgram)

J2OBJC_NAME_MAPPING(SquiDBSQLiteProgram, "com.yahoo.android.sqlite", "SquiDB")
